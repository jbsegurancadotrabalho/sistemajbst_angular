<app-navbar></app-navbar>

<div class="container mt-5">
  <div class="card mt-5">
    <div class="card-body">
      <div class="row mb-2 mt-4">
        <div class="col-md-10 mt-1">
          <h5>Criar Documentos</h5>
          <p>Preencha os campos para criar os documentos.</p>
        </div>

        <div class="col-md-2 mt-1">
          <a href="consultar-documentos" class="btn btn-success">Voltar</a>
        </div>
      </div>
      <div *ngIf="cadastroSucesso" class="alert alert-info alert-dismissible fade show" role="alert">
        <strong>{{cadastroSucesso}}</strong>
        <button type="button" class="btn-close" aria-label="Close" (click)="cadastroSucesso = ''"></button>
      </div>

      <div *ngIf="cadastroErro" class="alert alert-info alert-dismissible fade show" role="alert">
        <strong>{{cadastroErro}}</strong>
        <button type="button" class="btn-close" aria-label="Close" (click)="cadastroErro = ''"></button>
      </div>

      <hr />

      <form [formGroup]="formularioRelatorios" (ngSubmit)="criarRelatorios()">
        <input type="hidden" formControlName="idRelatorios">

        <div class="row">
          <div class="form-group col-md-1 mt-3">
            <label for="venda">Venda</label>
            <input type="text" id="venda" formControlName="venda" class="form-control">
          </div>

          <div class="form-group col-md-1 mt-3">
            <label for="valor">Valor</label>
            <input type="text" id="valor" formControlName="valor" class="form-control">
          </div>

          <div class="form-group col-md-1 mt-3">
            <label for="status">Status</label>
            <input type="text" id="status" formControlName="status" class="form-control">
          </div>

          <div class="form-group col-md-1 mt-3">
            <label for="tipo_de_pagamento">Pagamento</label>
            <input type="text" id="tipo_de_pagamento" formControlName="tipo_de_pagamento" class="form-control">
          </div>

          <div class="col-md-4 mt-3">
            <label for="unidades">Unidades</label>
            <ng-select
              [items]="unidades"
              bindLabel="nomeEspecificoUnidade"
              bindValue="idunidadeDoc"
              class="form-select custom-ng-select"
              formControlName="idunidadeDoc"
              [ngClass]="{'is-invalid': formularioRelatorios.get('idunidadeDoc')?.invalid && formularioRelatorios.get('idunidadeDoc')?.touched}">
              <ng-template ng-label-tmp let-item="item">
                <div class="custom-bg" style="z-index: 1000;">
                  {{ item.cnpj | uppercase }}
                  {{ item.nomefantasia | uppercase }}
                </div>
              </ng-template>
              <ng-template ng-option-tmp let-item="item">
                <div>
                  {{ item.cnpj | uppercase }}
                  {{ item.nomefantasia  | uppercase }}
                </div>
              </ng-template>
            </ng-select>
          </div>

          <div class="col-md-4 mt-3">
            <label for="unidades">Funcionarios</label>
            <ng-select
              [items]="funcionarios"
              bindLabel="nome"
              bindValue="idFuncionario"
              class="form-select custom-ng-select"
              formControlName="idFuncionario"
              [ngClass]="{'is-invalid': formularioRelatorios.get('idFuncionario')?.invalid && formularioRelatorios.get('idFuncionario')?.touched}">
              <ng-template ng-label-tmp let-item="item">
                <div class="custom-bg" style="z-index: 1000;">
                  {{ item.nome | uppercase }}
                  {{ item.cpf | uppercase }}
                </div>
              </ng-template>
              <ng-template ng-option-tmp let-item="item">
                <div>
                  {{ item.nome | uppercase }}
                  {{ item.cpf  | uppercase }}
                </div>
              </ng-template>
            </ng-select>
          </div>

          <div class="col-md-12 mt-4">
            <label>Observações:</label>
            <textarea class="form-control" id="observacoes" rows="5" formControlName="observacoes"></textarea>
          </div>
        </div>

        <div class="row mb-2 mt-5">
          <div class="col-md-12">
            <input type="submit" class="btn btn-success" value="Realizar Cadastro" />
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
